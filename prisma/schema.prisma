generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model Invoice {
  id                String      @id @db.Char(6)
  createdAt         DateTime    @default(now()) @map("created_at")
  paymentDue        DateTime    @map("payment_due")
  description       String
  paymentTerms      Int         @map("payment_terms")
  clientName        String      @map("client_name")
  clientEmail       String      @map("client_email")
  status            String
  senderAddressId   String      @map("sender_address_id")
  clientAddressId   String      @map("client_address_id")

  senderAddress     Address     @relation("SenderAddress", fields: [senderAddressId], references: [id])
  clientAddress     Address     @relation("ClientAddress", fields: [clientAddressId], references: [id])
  items             InvoiceItem[]
}

model Address {
  id          String         @id @default(uuid())
  street      String
  city        String
  postCode    String      @map("post_code")
  country     String

  senderInvoices Invoice[] @relation("SenderAddress")
  clientInvoices Invoice[] @relation("ClientAddress")
}

model InvoiceItem {
  id        String     @id @default(uuid())
  invoiceId String  @db.Char(6) @map("invoice_id")
  name      String
  quantity  Int
  price     Decimal @db.Decimal(12, 2)
  total     Decimal @db.Decimal(12, 2)

  invoice Invoice @relation(fields: [invoiceId], references: [id])
}

